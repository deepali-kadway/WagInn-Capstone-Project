<div class="my-bookings-container">
  <!-- Back Navigation -->
  <div class="back-navigation">
    <button class="btn-back" routerLink="/userDashboard">
      <i class="fas fa-arrow-left"></i> Back to Dashboard
    </button>
  </div>

  <!-- Header -->
  <div class="header">
    <h2><i class="fas fa-calendar-alt"></i> My Bookings</h2>
    <p class="subtitle">View and manage your booking history</p>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <div class="spinner"></div>
    <p>Loading your bookings...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !loading" class="error-container">
    <i class="fas fa-exclamation-triangle"></i>
    <p>{{ error }}</p>
    <button class="btn btn-primary" (click)="loadUserBookings()">
      <i class="fas fa-refresh"></i> Try Again
    </button>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && !error && bookings.length === 0" class="empty-state">
    <i class="fas fa-calendar-times"></i>
    <h3>No Bookings Yet</h3>
    <p>
      You haven't made any bookings yet. Start exploring properties to make your
      first booking!
    </p>
    <button class="btn btn-primary" routerLink="/userDashboard">
      <i class="fas fa-search"></i> Browse Properties
    </button>
  </div>

  <!-- Bookings List -->
  <div *ngIf="!loading && !error && bookings.length > 0" class="bookings-list">
    <div class="booking-card" *ngFor="let booking of bookings; let i = index">
      <div class="booking-header">
        <div class="property-info">
          <h3>{{ booking.propertyTitle }}</h3>
          <p class="property-type">{{ booking.propertyType }}</p>
          <p class="location">
            <i class="fas fa-map-marker-alt"></i> {{ booking.location }}
          </p>
        </div>
        <div class="booking-status">
          <span class="status-badge" [class]="getStatusClass(booking.status)">
            {{ booking.status | titlecase }}
          </span>
        </div>
      </div>

      <div class="booking-details">
        <div class="detail-row">
          <div class="detail-item">
            <label>Host:</label>
            <span>{{ booking.hostName }}</span>
          </div>
          <div class="detail-item">
            <label>Confirmation #:</label>
            <span class="confirmation-number">{{
              booking.confirmationNumber
            }}</span>
          </div>
        </div>

        <div class="detail-row">
          <div class="detail-item">
            <label>Check-in:</label>
            <span>{{ formatDate(booking.checkIn) }}</span>
          </div>
          <div class="detail-item">
            <label>Check-out:</label>
            <span>{{ formatDate(booking.checkOut) }}</span>
          </div>
          <div class="detail-item">
            <label>Nights:</label>
            <span>{{
              booking.totalNights ||
                calculateDaysBetween(booking.checkIn, booking.checkOut)
            }}</span>
          </div>
        </div>

        <div class="detail-row">
          <div class="detail-item">
            <label>Guests:</label>
            <span>
              {{ booking.adults }} Adult{{ booking.adults > 1 ? "s" : "" }}
              <span *ngIf="booking.children > 0"
                >, {{ booking.children }} Child{{
                  booking.children > 1 ? "ren" : ""
                }}</span
              >
              <span *ngIf="booking.infants > 0"
                >, {{ booking.infants }} Infant{{
                  booking.infants > 1 ? "s" : ""
                }}</span
              >
              <span *ngIf="booking.pets > 0"
                >, {{ booking.pets }} Pet{{ booking.pets > 1 ? "s" : "" }}</span
              >
            </span>
          </div>
          <div class="detail-item">
            <label>Total Price:</label>
            <span class="total-price">${{ booking.totalPrice }}</span>
          </div>
        </div>

        <div class="detail-row">
          <div class="detail-item">
            <label>Booking Date:</label>
            <span>{{ formatDate(booking.bookingDate) }}</span>
          </div>
          <div class="detail-item">
            <label>Price per Night:</label>
            <span>${{ booking.pricePerNight }}</span>
          </div>
        </div>
      </div>

      <div class="booking-actions">
        <button
          *ngIf="booking.status === 'confirmed'"
          class="btn btn-outline-secondary"
        >
          <i class="fas fa-eye"></i> View Details
        </button>
        <button
          *ngIf="booking.status === 'confirmed'"
          class="btn btn-outline-danger"
        >
          <i class="fas fa-times"></i> Cancel Booking
        </button>
        <button
          *ngIf="booking.status === 'completed'"
          class="btn btn-outline-primary"
        >
          <i class="fas fa-star"></i> Leave Review
        </button>
      </div>
    </div>
  </div>
</div>
