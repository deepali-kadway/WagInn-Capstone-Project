<div class="dashboard-container">
  <!-- Search Section -->
  <div class="search-section">
    <div class="search-card">
      <div class="search-header">
        <h2>Find Your Purrfect Stay</h2>
        <!-- Menu Toggle Button -->
        <button class="menu-toggle-btn" (click)="toggleSidebar()">
          <i class="bi bi-list"></i>
        </button>
      </div>
      <form class="search-form">
        <!-- Destination -->
        <div class="form-row">
          <div class="form-group destination-group">
            <label for="destination">Where are you going?</label>
            <input
              type="text"
              id="destination"
              [(ngModel)]="searchParams.destination"
              name="destination"
              placeholder="Enter destination city"
              class="form-control destination-input"
            />
          </div>
        </div>

        <!-- Dates -->
        <div class="form-row">
          <div class="form-group">
            <label for="checkIn">Check-in</label>
            <input
              type="date"
              id="checkIn"
              [(ngModel)]="searchParams.checkInDate"
              name="checkInDate"
              class="form-control"
            />
          </div>
          <div class="form-group">
            <label for="checkOut">Check-out</label>
            <input
              type="date"
              id="checkOut"
              [(ngModel)]="searchParams.checkOutDate"
              name="checkOutDate"
              class="form-control"
            />
          </div>
        </div>

        <!-- Guests and Counts -->
        <div class="form-row">
          <div class="form-group">
            <label for="guests">Adults</label>
            <select
              id="guests"
              [(ngModel)]="searchParams.adults"
              name="adults"
              class="form-control"
            >
              <option value="1">1 Adult</option>
              <option value="2">2 Adults</option>
              <option value="3">3 Adults</option>
              <option value="4">4 Adults</option>
              <option value="5">5+ Adults</option>
            </select>
          </div>
          <div class="form-group">
            <label for="children">Children (2-12)</label>
            <select
              id="children"
              [(ngModel)]="searchParams.children"
              name="children"
              class="form-control"
            >
              <option value="0">0 Children</option>
              <option value="1">1 Child</option>
              <option value="2">2 Children</option>
              <option value="3">3 Children</option>
              <option value="4">4+ Children</option>
            </select>
          </div>
          <div class="form-group">
            <label for="infants">Infants (0-2)</label>
            <select
              id="infants"
              [(ngModel)]="searchParams.infants"
              name="infants"
              class="form-control"
            >
              <option value="0">0 Infants</option>
              <option value="1">1 Infant</option>
              <option value="2">2 Infants</option>
              <option value="3">3+ Infants</option>
            </select>
          </div>
          <div class="form-group">
            <label for="pets">Pets</label>
            <select
              id="pets"
              [(ngModel)]="searchParams.pets"
              name="pets"
              class="form-control"
            >
              <option value="0">0 Pets</option>
              <option value="1">1 Pet</option>
              <option value="2">2 Pets</option>
              <option value="3">3 Pets</option>
              <option value="4">4+ Pets</option>
            </select>
          </div>
        </div>

        <!-- Search Button -->
        <div class="form-row">
          <button type="submit" class="search-btn" (click)="onSearch($event)">
            Search Properties
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Main Content Area -->
  <div class="main-content">
    <!-- Content Area -->
    <div class="content-area">
      <div class="content-header">
        <h1>Welcome Back!</h1>
        <p>Find your next perfect stay with your furry friends</p>
      </div>

      <!-- Dynamic Content Based on Active Section -->
      <div class="content-body">
        <!-- <div *ngIf="activeSection === 'profile'" class="section-content">
          <h2>Profile Management</h2>
          <p>Manage your personal information and preferences</p>
        </div>

        <div *ngIf="activeSection === 'bookings'" class="section-content">
          <h2>My Bookings</h2>
          <p>View and manage your upcoming and past bookings</p>
        </div>

        <div *ngIf="activeSection === 'chats'" class="section-content">
          <h2>Messages</h2>
          <p>Chat with hosts and manage your conversations</p>
        </div> -->

        <!-- Search Results Section -->
        <div *ngIf="activeSection === 'search-results'" class="section-content">
          <div class="search-results-header">
            <h2>
              <i class="bi bi-house-heart-fill"></i>
              Search Results
            </h2>
            <button class="back-btn" (click)="setActiveSection('dashboard')">
              <i class="bi bi-arrow-left"></i> Back to Dashboard
            </button>
          </div>

          <!-- Loading State -->
          <div *ngIf="isSearching" class="loading-container">
            <div class="spinner"></div>
            <p>Searching for pet-friendly properties...</p>
          </div>

          <!-- Error Message -->
          <div *ngIf="searchError && !isSearching" class="error-message">
            <i class="bi bi-exclamation-triangle"></i>
            {{ searchError }}
          </div>

          <!-- Search Results -->
          <div
            *ngIf="!isSearching && searchResults.length > 0"
            class="properties-container"
          >
            <p class="results-count">
              Found {{ searchResults.length }} pet-friendly properties
            </p>

            <div class="properties-grid">
              <div *ngFor="let property of searchResults" class="property-card">
                <!-- Property Header -->
                <div class="property-header">
                  <h3>{{ property.propertyTitle }}</h3>
                  <span class="property-type">{{
                    property.propertyType | titlecase
                  }}</span>
                </div>

                <!-- Property Location -->
                <div class="property-location">
                  <i class="bi bi-geo-alt-fill"></i>
                  {{ property.city }}, {{ property.province }},
                  {{ property.zipCode }},
                  {{ property.country }}
                </div>

                <!-- Property Details -->
                <div class="property-details">
                  <div class="detail-item">
                    <i class="bi bi-people-fill"></i>
                    Up to {{ property.guests }} guests
                  </div>
                  <div class="detail-item">
                    <i class="bi bi-house-door-fill"></i>
                    <!-- property.bedrooms !== 1 ? "s" : "" -> ternary operator. If property.bedrooms !== 1 → true → append "s", else ""-->
                    {{ property.bedrooms }} bed{{
                      property.bedrooms !== 1 ? "s" : ""
                    }}, {{ property.bathrooms }} bath{{
                      property.bathrooms !== 1 ? "s" : ""
                    }}
                  </div>
                  <div class="detail-item">
                    <i class="bi bi-heart-fill"></i>
                    Up to {{ property.pets }} pets allowed
                  </div>
                </div>

                <!-- Amenities -->
                <div class="amenities" *ngIf="property.ammenities">
                  <h4><i class="bi bi-check-circle"></i> Amenities:</h4>
                  <p>{{ property.ammenities }}</p>
                </div>

                <!-- Pet Amenities -->
                <div class="pet-amenities" *ngIf="property.ammenitiesPets">
                  <h4><i class="bi bi-check-circle"></i> Pet Amenities:</h4>
                  <p>{{ property.ammenitiesPets }}</p>
                </div>

                <!-- Allowed Pets -->
                <div class="allowed-pets" *ngIf="property.allowedPetsType">
                  <h4><i class="bi bi-check-circle"></i> Allowed Pets:</h4>
                  <p>{{ property.allowedPetsType }}</p>
                </div>

                <!-- Price -->
                <div class="property-price">
                  <span class="base-price">${{ property.totalGuestPrice }}</span> per
                  night
                  <br />
                </div>

                <!-- Host Info -->
                <div class="host-info">
                  <i class="bi bi-person-circle"></i>
                  Hosted by {{ property.firstName }} {{ property.lastName }}
                </div>

                <!-- Action Buttons -->
                <div class="property-actions">
                  <button
                    class="btn btn-primary"
                    (click)="viewProperty(property.id)"
                  >
                    <i class="bi bi-eye"></i> View Details
                  </button>
                  <button
                    class="btn btn-secondary"
                    (click)="contactHost(property.id)"
                  >
                    <i class="bi bi-chat"></i> Contact Host
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- No Results -->
          <div
            *ngIf="!isSearching && searchResults.length === 0 && !searchError"
            class="no-results"
          >
            <i class="bi bi-house-x-fill"></i>
            <h3>No properties found</h3>
            <p>Try adjusting your search criteria:</p>
            <ul>
              <li>Search a different city or area</li>
              <li>Reduce the number of guests</li>
              <li>Reduce the number of pets</li>
            </ul>
            <button
              class="btn btn-primary"
              (click)="setActiveSection('dashboard')"
            >
              <i class="bi bi-search"></i> Try Another Search
            </button>
          </div>
        </div>

        <div
          *ngIf="!activeSection || activeSection === 'dashboard'"
          class="dashboard-content"
        >
          <!-- 1. Popular Destinations -->
          <section class="trending-destinations">
            <h2 class="section-title">
              <i class="bi bi-geo-alt-fill"></i>
              Trending Pet-Friendly Destinations
            </h2>
            <div class="destinations-grid">
              <div class="destination-card">
                <div class="destination-image">
                  <i class="bi bi-building destination-icon"></i>
                </div>
                <div class="destination-info">
                  <h3>Banff</h3>
                  <p>
                    <i class="bi bi-house-heart-fill"></i> 20+ Pet-Friendly
                    Stays
                  </p>
                  <div class="pet-amenities">
                    <span class="amenity"
                      ><i class="bi bi-tree-fill"></i> Hiking Trails</span
                    >
                    <span class="amenity"
                      ><i class="bi bi-shop"></i> Pet Stores</span
                    >
                  </div>
                </div>
              </div>

              <div class="destination-card">
                <div class="destination-image">
                  <i class="bi bi-building destination-icon"></i>
                </div>
                <div class="destination-info">
                  <h3>Calgary</h3>
                  <p>
                    <i class="bi bi-house-heart-fill"></i> 38+ Pet-Friendly
                    Stays
                  </p>
                  <div class="pet-amenities">
                    <span class="amenity"
                      ><i class="bi bi-music-note"></i> Indoor Play</span
                    >
                    <span class="amenity"
                      ><i class="bi bi-cup-hot-fill"></i> Pet Cafes</span
                    >
                  </div>
                </div>
              </div>

              <div class="destination-card">
                <div class="destination-image">
                  <i class="bi bi-building destination-icon"></i>
                </div>
                <div class="destination-info">
                  <h3>Jasper</h3>
                  <p>
                    <i class="bi bi-house-heart-fill"></i> 15+ Pet-Friendly
                    Stays
                  </p>
                  <div class="pet-amenities">
                    <span class="amenity"
                      ><i class="bi bi-tree-fill"></i> Hiking Trails</span
                    >
                    <span class="amenity"
                      ><i class="bi bi-music-note"></i> Indoor Play</span
                    >
                  </div>
                </div>
              </div>

              <div class="destination-card">
                <div class="destination-image">
                  <i class="bi bi-building destination-icon"></i>
                </div>
                <div class="destination-info">
                  <h3>Vancouver</h3>
                  <p>
                    <i class="bi bi-house-heart-fill"></i> 26+ Pet-Friendly
                    Stays
                  </p>
                  <div class="pet-amenities">
                    <span class="amenity"
                      ><i class="bi bi-water"></i> Pet Beaches</span
                    >
                    <span class="amenity"
                      ><i class="bi bi-shop"></i> Pet Stores</span
                    >
                  </div>
                </div>
              </div>
            </div>
          </section>

          <!-- 3. Pet-Friendly Features -->
          <section class="pet-features">
            <h2 class="section-title">
              <i class="bi bi-heart-fill"></i>
              What Makes a Stay Perfect for Your Pet?
            </h2>
            <div class="features-grid">
              <div class="feature-card">
                <div class="feature-icon">
                  <i class="bi bi-house-door"></i>
                </div>
                <h3>Fenced Yards</h3>
                <p>
                  Secure outdoor spaces where your pet can play freely and
                  safely
                </p>
              </div>

              <div class="feature-card">
                <div class="feature-icon">
                  <i class="bi bi-gift"></i>
                </div>
                <h3>Pet Toys Provided</h3>
                <p>
                  Complimentary toys and accessories to keep your furry friend
                  entertained
                </p>
              </div>

              <div class="feature-card">
                <div class="feature-icon">
                  <i class="bi bi-plus-circle-fill"></i>
                </div>
                <h3>Pet Grooming Centers</h3>
                <p>
                  Gentle pet grooming close to home for a happy, healthy shine.
                </p>
              </div>

              <div class="feature-card">
                <div class="feature-icon">
                  <i class="bi bi-tree-fill"></i>
                </div>
                <h3>Dog Parks Nearby</h3>
                <p>
                  Off-leash areas and pet socialization spots just minutes away
                </p>
              </div>
            </div>
          </section>

          <!-- 4. Testimonials -->
          <section class="testimonials">
            <h2 class="section-title">
              <i class="bi bi-chat-heart-fill"></i>
              What Pet Parents Are Saying
            </h2>
            <div class="testimonials-grid">
              <div class="testimonial-card">
                <div class="testimonial-header">
                  <div class="reviewer-info">
                    <div class="reviewer-avatar">
                      <i class="bi bi-person-fill"></i>
                    </div>
                    <div class="reviewer-details">
                      <h4>Sarah M.</h4>
                      <p>Golden Retriever Parent</p>
                    </div>
                  </div>
                  <div class="pet-badge">
                    <i class="bi bi-heart-fill"></i>
                  </div>
                </div>
                <div class="testimonial-content">
                  <p>
                    "Max loved the fenced yard! The hosts were incredibly
                    welcoming and even left treats for him. Will definitely book
                    again!"
                  </p>
                  <div class="rating">
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                  </div>
                </div>
              </div>

              <div class="testimonial-card">
                <div class="testimonial-header">
                  <div class="reviewer-info">
                    <div class="reviewer-avatar">
                      <i class="bi bi-person-fill"></i>
                    </div>
                    <div class="reviewer-details">
                      <h4>Mike & Luna</h4>
                      <p>Cat & Dog Family</p>
                    </div>
                  </div>
                  <div class="pet-badge">
                    <i class="bi bi-heart-fill"></i>
                  </div>
                </div>
                <div class="testimonial-content">
                  <p>
                    "Perfect for our multi-pet family! Luna and Whiskers both
                    felt at home. The pet amenities were outstanding."
                  </p>
                  <div class="rating">
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                  </div>
                </div>
              </div>

              <div class="testimonial-card">
                <div class="testimonial-header">
                  <div class="reviewer-info">
                    <div class="reviewer-avatar">
                      <i class="bi bi-person-fill"></i>
                    </div>
                    <div class="reviewer-details">
                      <h4>Emma K.</h4>
                      <p>Rescue Dog Mom</p>
                    </div>
                  </div>
                  <div class="pet-badge">
                    <i class="bi bi-heart-fill"></i>
                  </div>
                </div>
                <div class="testimonial-content">
                  <p>
                    "Buddy was nervous about traveling, but the pet-friendly
                    touches made all the difference. Highly recommend!"
                  </p>
                  <div class="rating">
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>
      </div>
    </div>
  </div>

  <!-- Slide-out Sidebar -->
  <div
    class="sidebar-overlay"
    [class.active]="sidebarOpen"
    (click)="closeSidebar()"
  ></div>
  <nav class="slide-sidebar" [class.open]="sidebarOpen">
    <div class="sidebar-header">
      <div class="user-info">
        <div class="user-avatar">
          <i class="bi-person-circle"></i>
        </div>
        <div class="user-details">
          <h3>{{ currentUser?.firstName || "John" }}</h3>
          <p>{{ currentUser?.email || "user@example.com" }}</p>
          <p><b>Pets: </b>{{ getPetNames() }}</p>
        </div>
      </div>
      <button class="close-btn" (click)="closeSidebar()">
        <i class="bi-x-lg"></i>
      </button>
    </div>

    <ul class="sidebar-menu">
      <li class="sidebar-item" [class.active]="activeSection === 'profile'">
        <a href="#" (click)="setActiveSection('profile')" class="sidebar-link">
          <i class="bi bi-person-fill"></i>
          <span>Profile</span>
        </a>
      </li>
      <li class="sidebar-item" [class.active]="activeSection === 'pets'">
        <a href="#" (click)="setActiveSection('pets')" class="sidebar-link">
          <i class="bi bi-heart-fill"></i>
          <span>My Pets</span>
        </a>
      </li>
      <li class="sidebar-item" [class.active]="activeSection === 'bookings'">
        <a href="#" (click)="setActiveSection('bookings')" class="sidebar-link">
          <i class="bi bi-calendar-check-fill"></i>
          <span>My Bookings</span>
        </a>
      </li>
      <li class="sidebar-item" [class.active]="activeSection === 'chats'">
        <a href="#" (click)="setActiveSection('chats')" class="sidebar-link">
          <i class="bi-chat-dots-fill"></i>
          <span>Chats</span>
        </a>
      </li>
      <li class="sidebar-item logout-item">
        <a href="#" (click)="onLogout()" class="sidebar-link logout-link">
          <i class="bi-box-arrow-left"></i>
          <span>Logout</span>
        </a>
      </li>
    </ul>
  </nav>
</div>
